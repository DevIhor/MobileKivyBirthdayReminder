#:import Window kivy.core.window.Window
#:import IconLeftWidget kivymd.uix.list.IconLeftWidget


ScreenManager:
    AgeBackdrop:
    SetAgeScreen:

<SetAgeScreen@Screen>:
    name: 'set_age'

    BoxLayout:
        Button:
            text: 'Back'
            on_press: app.root.current = 'main'
        Button:
            text: 'Quit'

<ItemBackdropFrontLayer@TwoLineAvatarListItem>
    icon: "android"

    IconLeftWidget:
        icon: root.icon


<BirthdaysBackdropLayer@ItemBackdropFrontLayer>
    backdrop: None
    text: "Ivan Lutsiuk"
    secondary_text: "04.07.1990"
    icon: "cake-variant"
    on_press: root.backdrop.open(-Window.height / 2)
    pos_hint: {"top": 1}
    _no_ripple_effect: True


<AgeBackdropLayer@BoxLayout>
    id: age_backdrop
    size_hint: .8, .8
    orientation: "vertical"
    pos_hint: {"center_x": .5, "center_y": .6}

    MDLabel:
        id: age
        text: "You haven't set your birthday yet!"
        font_style: "H2"
        halign: "center"

    MDRectangleFlatButton:
        text: "SET"
        text_color: rgba("#ffffff")
        line_color: rgba("#ffffff")
        pos_hint: {"center_x": .5, "center_y": .6}
        on_release:
            app.root.current = 'set_age'

<AgeBackdrop@Screen>
    name: 'main'

    MDBackdrop:
        id: backdrop
        left_action_items: [['transfer-down', lambda x: self.open()]]
        title: "Your age"
        radius_left: "25dp"
        radius_right: "0dp"
        header_text: "Birthdays:"

        MDBackdropBackLayer:
            AgeBackdropLayer:
                id: backlayer

        MDBackdropFrontLayer:
            BirthdaysBackdropLayer:
                backdrop: backdrop

    MDFloatingActionButton:
        icon: "account-plus"
        md_bg_color: app.theme_cls.primary_color
        text_color: rgba("#ffffff")
        pos_hint: {"center_x": .90, "center_y": .05}
