#:import Window kivy.core.window.Window


ScreenManager:
    AgeBackdrop:
    AddBirthdayScreen:

<AddBirthdayScreen@Screen>:
    name: 'add_birthday'

    MDBoxLayout:
        orientation: "vertical"
        halign: "center"

        MDToolbar:
            title: "Add new person"
        MDTextField:
            id: name
            hint_text: "Name"
        MDTextField:
            id: surname
            hint_text: "Surname"
        MDRaisedButton:
            text: "Set Birthday"
            text_color: rgba("#ffffff")
            line_color: rgba("#ffffff")
            on_release: root.show_date_picker()
        MDRaisedButton:
            text: "Save"
            text_color: rgba("#00ff00")
            line_color: rgba("#00ff00")
            on_release:
                root.on_save()
                app.root.current = 'main'
        MDRaisedButton:
            text: 'Back'
            text_color: rgba("#ff0000")
            line_color: rgba("#ff0000")
            on_release:
                app.root.current = 'main'


<ItemBackdropFrontLayer@TwoLineAvatarListItem>
    text: ""
    secondary_text: ""

    IconLeftWidget:
        icon: "cake-variant"


<BirthdaysBackdropLayer@BoxLayout>
    ScrollView:
        MDList:
            id: scroll


<AgeBackdropLayer@BoxLayout>
    id: age_backdrop
    size_hint: .8, .8
    orientation: "vertical"
    pos_hint: {"center_x": .5, "center_y": .6}

    MDLabel:
        id: age
        text: "You haven't set your birthday yet!"
        font_style: "H2"
        halign: "center"

    MDRaisedButton:
        id: change_age_btn
        text: "SET"
        text_color: rgba("#ffffff")
        line_color: rgba("#ffffff")
        pos_hint: {"center_x": .5, "center_y": .6}
        on_release: root.show_date_picker()

<AgeBackdrop@Screen>
    name: 'main'

    MDBackdrop:
        id: backdrop
        left_action_items: [['transfer-down', lambda x: self.open()]]
        title: "Your age"
        radius_left: "25dp"
        radius_right: "0dp"
        header_text: "Birthdays:"

        MDBackdropBackLayer:
            AgeBackdropLayer:
                id: backlayer

        MDBackdropFrontLayer:
            BirthdaysBackdropLayer:
                id: frontlayer

    MDFloatingActionButton:
        icon: "account-plus"
        md_bg_color: app.theme_cls.primary_color
        text_color: rgba("#ffffff")
        pos_hint: {"center_x": .90, "center_y": .05}
        on_release:
            app.root.current = 'add_birthday'
